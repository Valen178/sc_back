=== ENDPOINTS DE LA API ===

BASE URL: http://localhost:3000

=== GESTIÓN DE PUBLICACIONES ===

1. Crear Nueva Publicación
   POST /posts
   Headers: {
     "Authorization": "Bearer <token>"
   }
   Body: {
     "text": string,      // Opcional si se proporciona URL
     "url": string       // Opcional si se proporciona texto
   }
   Response: {
     "message": "Post created successfully",
     "post": { ... }
   }

2. Obtener Todas las Publicaciones
   GET /posts
   Response: [
     {
       "id": number,
       "text": string,
       "url": string,
       "user_id": number,
       "created_at": timestamp,
       "user": {
         "id": number,
         "email": string,
         "role": string
       }
     }
   ]

3. Obtener Publicaciones de Usuario Específico
   GET /posts/user/:userId
   Response: {
     "message": "User posts retrieved successfully",
     "post": [ ... ]
   }

4. Eliminar Publicación
   DELETE /posts/:postId
   Headers: {
     "Authorization": "Bearer <token>"
   }
   Response: {
     "message": "Post deleted successfully"
   }
   Notas: 
   - Solo el propietario o un admin puede eliminar la publicación
   - Se requiere autenticación

Versión: 1.0.0
Última actualización: 09/09/2025

=== CONVENCIONES ===

1. Autenticación:
   - La mayoría de los endpoints requieren token JWT
   - Formato: Authorization: Bearer <token>
   - Tokens expiran en 24 horas

2. Respuestas:
   - Formato: application/json
   - Códigos HTTP estándar
   - Mensajes descriptivos en errores

3. Validaciones:
   - Campos requeridos indicados
   - Tipos de datos especificados
   - Referencias válidas verificadas

=== AUTENTICACIÓN ===

1. Registro de Usuario
   POST /auth/signup
   Body: {
     "email": string,
     "password": string,
     "role": "user" // por defecto
   }

2. Inicio de Sesión
   POST /auth/login
   Body: {
     "email": string,
     "password": string
   }

3. Inicio de Sesión con Google
   POST /auth/google
   Body: {
     "token": string // Token de Google
   }

4. Completar Perfil
   POST /auth/complete-profile
   Headers: {
     "Authorization": "Bearer <token>"
   }
   Body: {
     // Para perfil de atleta
     "name": string,
     "last_name": string,
     "birthdate": date,
     "height": number,
     "weight": number,
     "location_id": number,
     "sport_id": number, 
     "phone_number": string,
     "ig_user": string,      // opcional
     "x_user": string,        // opcional
     "description": string     // opcional
   }
   // O
   Body: {
     // Para perfil de agente
     "name": string,
     "last_name": string,
     "description": string,
     "location_id": number,
     "phone_number": string,
     "ig_user": string,      // opcional
     "x_user": string,        // opcional
     "agency": string         // opcional
   }
   // O
   Body: {
     // Para perfil de equipo
     "name": string,
     "job": string,
     "description": string,
     "sport_id": number,
     "location_id": number,
     "phone_number": string,
     "ig_user": string,      // opcional
     "x_user": string        // opcional
   }

=== PANEL DE ADMINISTRADOR ===
(Todos requieren header: "Authorization": "Bearer <token>" y rol de admin)

=== GESTIÓN DE USUARIOS ===

1. Obtener Todos los Usuarios
   GET /admin/users

2. Obtener Usuario Específico
   GET /admin/users/:id

3. Crear Usuario
   POST /admin/users
   Body: {
     "email": string,
     "password": string,
   }

4. Actualizar Usuario
   PUT /admin/users/:id
   Body: {
     // Campos a actualizar
   }

5. Eliminar Usuario
   DELETE /admin/users/:id

6. Cambiar Rol de Usuario
   PATCH /admin/users/:id/role
   Body: {
     "role": "user" | "admin"
   }

=== GESTIÓN DE SUSCRIPCIONES ===

1. Obtener Todas las Suscripciones
   GET /admin/subscriptions

2. Obtener Suscripción Específica
   GET /admin/subscriptions/:id

3. Actualizar Suscripción
   PUT /admin/subscriptions/:id
   Body: {
     // Campos a actualizar
   }

4. Eliminar Suscripción
   DELETE /admin/subscriptions/:id

=== GESTIÓN DE PUBLICACIONES ===

1. Obtener Todas las Publicaciones
   GET /admin/posts

2. Obtener Publicación Específica
   GET /admin/posts/:id

3. Eliminar Publicación
   DELETE /admin/posts/:id

=== GESTIÓN DE DEPORTES ===

1. Obtener Todos los Deportes
   GET /admin/sports

2. Obtener Deporte Específico
   GET /admin/sports/:id

3. Crear Deporte
   POST /admin/sports
   Body: {
     "name": string,
     // otros campos necesarios
   }

4. Actualizar Deporte
   PUT /admin/sports/:id
   Body: {
     // Campos a actualizar
   }

5. Eliminar Deporte
   DELETE /admin/sports/:id

=== GESTIÓN DE UBICACIONES ===

1. Obtener Todas las Ubicaciones
   GET /admin/locations

2. Obtener Ubicación Específica
   GET /admin/locations/:id

3. Crear Ubicación
   POST /admin/locations
   Body: {
     "name": string,
     "country": string,
     "city": string
     // otros campos necesarios
   }

4. Actualizar Ubicación
   PUT /admin/locations/:id
   Body: {
     // Campos a actualizar
   }

5. Eliminar Ubicación
   DELETE /admin/locations/:id

=== CONSULTAS (LOOKUP) ===
(Todos son públicos)

1. Obtener Todos los Deportes
   GET /lookup/sports

2. Obtener Todas las Ubicaciones
   GET /lookup/locations

3. Obtener Ubicaciones por País
   GET /lookup/locations/country/:country

=== PERFIL DE USUARIO ===
(Todos requieren header: "Authorization": "Bearer <token>")

1. Obtener Mi Perfil
   GET /profile/me
   Response: {
     "user": {
       "id": number,
       "mail": string,
       "role": string
     },
     "profileType": "athlete" | "agent" | "team",
     "profile": {
       // Datos del perfil según el tipo
     }
   }

2. Actualizar Mi Perfil
   PUT /profile/me
   Body: {
     "userUpdates": {
       "email": string,      // opcional
       "password": string   // opcional
     },
     "profileUpdates": {
       // Para perfil de atleta
       "name": string,
       "last_name": string,
       "birthdate": date,
       "height": number,
       "weight": number,
       "location_id": number,
       "sport_id": number,
       "phone_number": string,
       "ig_user": string,      // opcional
       "x_user": string,        // opcional
       "description": string,   // opcional
     }
     // O para perfil de agente
     "profileUpdates": {
       "name": string,
       "last_name": string,
       "description": string,
       "location_id": number,
       "phone_number": string,
       "ig_user": string,      // opcional
       "x_user": string,        // opcional
       "agency": string         // opcional
     }
     // O para perfil de equipo
     "profileUpdates": {
       "name": string,
       "job": string,
       "description": string,
       "sport_id": number,
       "location_id": number,
       "phone_number": string,
       "ig_user": string,      // opcional
       "x_user": string        // opcional
   }

=== FUNCIONALIDADES DE SWIPE Y MATCHES ===
(Todos requieren header: "Authorization": "Bearer <token>")

1. Dar Like/Dislike a Usuario
   POST /swipe
   Body: {
     "swiped_user_id": number,
     "action": "like" | "dislike"
   }
   Response: {
     "success": true,
     "match": boolean,
     "message": string
   }
   Notas:
   - Solo se puede interactuar con usuarios del mismo deporte
   - No se puede dar like/dislike a uno mismo
   - Si ambos usuarios se dan like, se crea un match automáticamente

2. Obtener Usuarios para Descubrir
   GET /swipe/discover
   Query Parameters:
     - profile_type_filter: "team" | "agent" | "both" (opcional)
     - limit: número máximo de usuarios (default: 10)
   Response: {
     "success": true,
     "users": [...],
     "user_profile_type": string,
     "user_sport_id": number,
     "count": number
   }
   Notas:
   - Los atletas pueden ver equipos y agentes
   - Los equipos y agentes pueden ver atletas
   - Solo muestra usuarios del mismo deporte
   - Excluye usuarios ya vistos

3. Obtener Matches del Usuario
   GET /swipe/matches
   Response: {
     "success": true,
     "matches": [
       {
         "match_id": number,
         "created_at": timestamp,
         "other_user": {
           "id": number,
           "profile_type": string,
           "profile": { ... }
         }
       }
     ],
     "count": number
   }

4. Obtener Estadísticas de Swipes
   GET /swipe/stats
   Response: {
     "success": true,
     "stats": {
       "sent": {
         "total": number,
         "likes": number,
         "dislikes": number
       },
       "received": {
         "total": number,
         "likes": number,
         "dislikes": number
       },
       "matches": number
     }
   }

=== GESTIÓN DE FOTOS DE PERFIL ===
(Todos requieren header: "Authorization": "Bearer <token>")

1. Subir Foto de Perfil
   POST /profile-photo/upload
   Content-Type: multipart/form-data
   Body (form-data):
     - photo: archivo de imagen (máx. 5MB)
     - profileType: "athlete" | "agent" | "team"
   Response: {
     "message": "Profile photo updated successfully",
     "photo_url": string
   }
   Notas:
   - Solo acepta archivos de imagen
   - Tamaño máximo: 5MB
   - Reemplaza la foto anterior automáticamente

2. Eliminar Foto de Perfil
   DELETE /profile-photo/delete
   Content-Type: application/json
   Body: {
     "profileType": "athlete" | "agent" | "team"
   }
   Response: {
     "message": "Profile photo deleted successfully"
   }
   Notas:
   - Elimina la foto del storage
   - Establece photo_url en null

=== GESTIÓN DE PLANES Y SUSCRIPCIONES (ADMIN) ===
(Todos requieren header: "Authorization": "Bearer <token>" y rol de admin)

1. Obtener Todos los Planes
   GET /admin/plans

2. Crear Plan
   POST /admin/plans
   Body: {
     "name": string,
     "price": number
   }

3. Eliminar Plan
   DELETE /admin/plans/:id

4. Obtener Todas las Suscripciones
   GET /admin/subscriptions

5. Obtener Suscripción Específica
   GET /admin/subscriptions/:id

6. Actualizar Suscripción
   PUT /admin/subscriptions/:id
   Body: {
     "end_date": date
   }

7. Eliminar Suscripción
   DELETE /admin/subscriptions/:id

=== NOTAS ===

- Todos los endpoints de administrador requieren autenticación y rol de admin
- Los endpoints de perfil y completar perfil requieren autenticación
- Los endpoints de lookup son públicos y no requieren autenticación
- Los endpoints de swipe requieren autenticación y perfil completo
- Las respuestas incluyen mensajes de error descriptivos en caso de fallos
- Todos los endpoints devuelven respuestas en formato JSON
- Las fotos de perfil se almacenan en Supabase Storage
- Los matches se crean automáticamente cuando dos usuarios se dan like mutuamente
